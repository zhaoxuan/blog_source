---
layout: post
title: "二进制的魔力"
date: 2014-02-28 10:21
comments: true
categories: C
---

因为需要做一个 IP Range 的功能，就是判断一个 IP 是不是在一个 IP Range 里面。

比如 127.0.0.1-127.0.0.255 这样一个范围，给一个 IP 地址，看这个 IP 地址是不是在前面的范围里面。

IP 地址，按照人的理解，很简单啊，前三段数字一样，最后一段数字在 1-255 之间就好。

说起来简单，但是要机器实现，怎么办？写一堆循环，然后每一段数据判断一次？也行，简单，符合人的思维。

但是你有没有考虑过 CPU 的感受？

IP 地址虽然用十进制表示看起来非常别扭，但是他本身是二进制的数字。

    127.0.0.1 表示成二进制是 1111 1111 . 0000 0000 . 0000 0000 . 0000 0001

把  127 变成二进制后，向左移动 8*3 就是他的二进制表示，然后把上面的二进制变成十进制

    127.0.0.1 => 2130706433
    127.0.0.255 => 2130706687

然后只要 2130706433 < IP < 2130706687 它就是在这个 IP Range 范围内。

面对计算机，还是用计算机的思维最方便了。